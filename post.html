<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage News</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            line-height: 1.6;
        }
        .container {
            max-width: 600px;
            margin: 50px auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            color: #333;
        }
        textarea, input {
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 10px;
            background: #008000;
            color: #fff;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background: #ff0000;
        }
        .logo {
            text-align: center;
            margin-bottom: 20px;
        }
        .logo img {
            width: 400px; /* Adjust the size of the logo */
        }
        .back-button {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: #008000;
            color: white;
            text-decoration: none;
            border-radius: 15px;
            font-size: 12px;
            position: absolute;
            left: 20px;
            top: 20px;
        }
        .back-button:hover {
            background-color: #ff0000;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Logo at the top -->
        <div class="logo">
            <img src="main.png" alt="Logo">
        </div>

        <!-- Back button (after logo) -->
        <a href="news.html" class="back-button">Back to News</a>

        <h1>Admin - Manage News</h1>
        <form id="news-form">
            <input type="text" id="name" placeholder="Enter your name..." maxlength="100" required>
            <textarea id="headline" placeholder="Enter news headline..." maxlength="200" required></textarea>
            <textarea id="subtext" placeholder="Enter subtext (optional)..." maxlength="300"></textarea>
            <input type="url" id="image-url" placeholder="Enter image URL (optional)" maxlength="500" pattern="https?://.+" title="Please enter a valid URL starting with http:// or https://">
            <div style="text-align: left; margin-bottom: 10px;">
                <label for="image-upload">Attach Image:</label>
                <input type="file" id="image-upload" accept="image/*">
            </div>
            <button type="submit">Post Update</button>
        </form>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDz1nwSYqWa4AiLXfM8VFGk2CzW2Dl6bag",
            authDomain: "thedailybd-acdaf.firebaseapp.com",
            databaseURL: "https://thedailybd-acdaf-default-rtdb.firebaseio.com",
            projectId: "thedailybd-acdaf",
            storageBucket: "thedailybd-acdaf.appspot.com",
            messagingSenderId: "582082023966",
            appId: "1:582082023966:web:cdee6a8c28e4513761140f",
            measurementId: "G-EML9VNGL8Z"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const newsRef = ref(db, 'news');

        // List of abusive words in English, Hindi, and Bengali
        const abusiveWords = [
            "motherchod", "behenchod", "chutiya", "chut","lawda","lawda","kutta","kuttar bacha","bastard", "asshole", "idiot", "stupid", "fucker", "loser", 
            "dog", "kutta", "bhenchod", "gaandu", "gandu", "chutiya", "madarchod", "salay", "bhadwa", 
            "bakamash", "jhanda", "harami", "anarchist", "bengali", "gali", "bhens ki aankh", "chor", 
            "behen ki aankh", "fuddu", "abey", "bekaar", "pidi", "udhar", "ma ki chut", "kutta"
        ];

        // Function to check for abusive words
        function containsAbusiveWords(text) {
            const lowerCaseText = text.toLowerCase();
            return abusiveWords.some(word => lowerCaseText.includes(word));
        }

        // Upload news
        document.getElementById('news-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const headline = document.getElementById('headline').value;
            const subtext = document.getElementById('subtext').value;
            const imageUrl = document.getElementById('image-url').value;

            // Check for abusive words in name, headline, and subtext
            if (containsAbusiveWords(name) || containsAbusiveWords(headline) || containsAbusiveWords(subtext)) {
                alert("Your submission contains inappropriate language. Please remove abusive words.");
                return; // Stop the submission
            }

            if (name.trim() === "") {
                alert("Name is required!");
                return;
            }

            push(newsRef, { 
                uploaderName: name, 
                headline, 
                subtext, 
                imageUrl, 
                date: new Date().toISOString() 
            });

            alert('News uploaded successfully!');
            document.getElementById('headline').value = '';
            document.getElementById('subtext').value = '';
            document.getElementById('image-url').value = '';
            document.getElementById('name').value = '';
        });
    </script>
</body>
</html>
